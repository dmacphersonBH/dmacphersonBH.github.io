<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>iHUB Sketch 4: Retro Bouncer</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
  <style>
    body, html { 
      margin: 0; 
      padding: 0; 
      overflow: hidden; 
      background: #000; 
    }
    
    /* --- CSS RETRO EFFECTS (GPU Accelerated) --- */
    
    /* 1. The Canvas container */
    canvas { 
      display: block;
      will-change: transform; 
      transform: translateZ(0);
      /* Add a slight blur for that glowy CRT look */
      filter: blur(0.5px) contrast(1.2); 
    }

    /* 2. Scanline Overlay */
    /* This sits on top of the canvas and adds lines without using JS */
    #scanlines {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(
        to bottom,
        rgba(255,255,255,0),
        rgba(255,255,255,0) 50%,
        rgba(0,0,0,0.2) 50%,
        rgba(0,0,0,0.2)
      );
      background-size: 100% 4px; /* Thickness of scanlines */
      pointer-events: none; /* Let clicks pass through */
      z-index: 10;
    }
  </style>
</head>
<body>

  <div id="scanlines"></div>

<script>
// --- CONFIGURATION ---
var speed = 1.5;        // Slightly faster for retro arcade feel
var logoScale = 0.5;    // Large text
var trailLength = 40;   // 0-255. Lower number = Longer trails. Higher = Shorter.

// --- GLOBALS ---
var dvdLogo;            
var pos;                
var vel;                
var logoW, logoH;       
var currentColor;
var palette;

function setup() {
  createCanvas(windowWidth, windowHeight);
  pixelDensity(1);
  colorMode(HSB, 360, 100, 100, 100);
  
  // Retro Terminal Palette
  palette = [
    color(120, 100, 100), // Phosphor Green
    color(60, 100, 100),  // Amber Monitor
    color(180, 100, 100), // Cyan
    color(300, 100, 100), // Hot Pink
    color(0, 0, 100)      // Pure White
  ];
  
  pickNewColor();

  // 1. CREATE LOGO BUFFER
  var fontSize = height * logoScale;
  textSize(fontSize);
  textStyle(BOLD);
  // Use Monospace for retro feel
  textFont('Courier New', 'Courier', 'monospace');
  
  var tw = textWidth("iHUB");
  var th = textAscent() + textDescent();
  
  logoW = tw + 20;
  logoH = th + 20;
  
  dvdLogo = createGraphics(logoW, logoH);
  dvdLogo.pixelDensity(1);
  dvdLogo.noStroke();
  dvdLogo.textAlign(LEFT, TOP);
  dvdLogo.textSize(fontSize);
  dvdLogo.textStyle(BOLD);
  dvdLogo.textFont('Courier New', 'monospace');
  
  // Draw text in White (we tint later)
  dvdLogo.fill(255);
  dvdLogo.text("iHUB", 0, 0);

  // 2. INITIAL PHYSICS
  pos = createVector(random(100, width - logoW), random(100, height - logoH));
  vel = createVector(speed, speed);
}

function draw() {
  // --- RETRO TRAILS LOGIC ---
  // Instead of background(0), we draw a semi-transparent black rect.
  // This causes the previous frame to fade out slowly.
  noStroke();
  fill(0, trailLength); 
  rect(0, 0, width, height);

  // 1. UPDATE PHYSICS
  pos.add(vel);

  // 2. BOUNDARY CHECKS
  var hit = false;

  if (pos.x + logoW >= width) {
    pos.x = width - logoW;
    vel.x *= -1;
    hit = true;
  }
  else if (pos.x <= 0) {
    pos.x = 0;
    vel.x *= -1;
    hit = true;
  }
  
  if (pos.y + logoH >= height) {
    pos.y = height - logoH;
    vel.y *= -1;
    hit = true;
  }
  else if (pos.y <= 0) {
    pos.y = 0;
    vel.y *= -1;
    hit = true;
  }

  if (hit) pickNewColor();

  // 3. DRAW LOGO
  tint(currentColor);
  image(dvdLogo, pos.x, pos.y);
  
  // (Exit logic removed for infinite loop)
}

function pickNewColor() {
  var newCol = random(palette);
  while (newCol === currentColor) {
    newCol = random(palette);
  }
  currentColor = newCol;
}

function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
  setup(); 
}
</script>
</body>
</html>